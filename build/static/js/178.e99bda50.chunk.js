"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[178],{6744:function(n,t,e){e.d(t,{Cq:function(){return f},MC:function(){return s},Qf:function(){return x},TK:function(){return S},Xb:function(){return g},Yb:function(){return h},b$:function(){return Z},iA:function(){return b},l:function(){return m},pd:function(){return p},tx:function(){return d},wE:function(){return v}});var r=e(1413),o=e(1933),i=e(5234),c=e(727),a=e(4936),u=e(3294),l="getDataset",s=function(n){var t=n.page,e=n.limit,r=n.searchText,a=n.definitionID,u=n.sort,s=(0,i.bK)(),d=(0,c.a)().channel,f=d.id?d.id:"",h=(0,o.useQuery)(["".concat(l,"-").concat(f),t,e,r,a,u],(function(){return s.get("/channel/".concat(String(f),"/data-set?page=").concat(String(t),"&limit=").concat(String(e)).concat(r?"".concat(r):"").concat(a?"&action[eq]=".concat(a):"").concat(null!==u&&void 0!==u&&u.sortOrder?"?sort[".concat(String(u.sortKey),"]=").concat(String(u.sortOrder.slice(0,-3))):"")).then((function(n){return n.data}))}),{keepPreviousData:!0});return{data:h.data,isLoading:h.isLoading,refetch:h.refetch,isRefetching:h.isRefetching}},d=function(){var n=(0,a.f)().onError,t=(0,o.useQueryClient)(),e=(0,i.bK)(),u=(0,c.a)().channel,s=u.id?u.id:"";return(0,o.useMutation)((function(n){return e.post("/channel/".concat(String(s),"/data-set"),(0,r.Z)((0,r.Z)({},n),{},{channel_id:s}))}),{onSuccess:function(){t.invalidateQueries("".concat(l,"-").concat(s))},onError:function(t){n(t)}})},f=function(){var n=(0,a.f)().onError,t=(0,o.useQueryClient)(),e=(0,i.bK)(),u=(0,c.a)().channel,s=u.id?u.id:"";return(0,o.useMutation)((function(n){var t=n.dataSetForm,o=n.id;return e.put("/channel/".concat(String(s),"/data-set/id/").concat(o),(0,r.Z)((0,r.Z)({},t),{},{channel_id:s}))}),{onSuccess:function(){t.invalidateQueries("".concat(l,"-").concat(s))},onError:function(t){n(t)}})},h=function(){var n=(0,a.f)().onError,t=(0,o.useQueryClient)(),e=(0,i.bK)(),r=(0,c.a)().channel,u=r.id?r.id:"";return(0,o.useMutation)((function(n){return e.delete("channel/".concat(String(u),"/data-set/id/").concat(n))}),{onSuccess:function(){t.invalidateQueries("".concat(l,"-").concat(u))},onError:function(t){n(t)}})},p=function(){var n=(0,a.f)().onError,t=(0,o.useQueryClient)(),e=(0,i.bK)(),u=(0,c.a)().channel,s=u.id?u.id:"";return(0,o.useMutation)((function(n){return e.put("/channel/".concat(String(s),"/data-set/bulk"),(0,r.Z)((0,r.Z)({},n),{},{channel_id:s}))}),{onSuccess:function(){t.invalidateQueries("".concat(l,"-").concat(s))},onError:function(t){n(t)}})},g=function(){var n=(0,a.f)().onError,t=(0,o.useQueryClient)(),e=(0,i.bK)(),r=(0,c.a)().channel,u=r.id?r.id:"";return(0,o.useMutation)((function(n){return e.delete("channel/".concat(String(u),"/data-set/bulk"),{data:{ids:n.ids}})}),{onSuccess:function(){t.invalidateQueries("".concat(l,"-").concat(u))},onError:function(t){n(t)}})},v=function(n){var t=n.type,e=n.page,r=n.limit,u=n.searchText,l=n.isExport,s=(0,a.f)().onError,d=(0,i.bK)(),f=(0,c.a)().channel,h=f.id?f.id:"",p=(0,o.useQuery)({queryKey:"exportDataSet-".concat(h),queryFn:function(){return d.get("/channel/".concat(String(h),"/data-set/export?type=").concat(String(t),"&page=").concat(String(e),"&limit=").concat(String(r)).concat(u?"&searchText=".concat(u):""),{responseType:"blob"}).then((function(n){return n.data})).catch((function(n){return s(n)}))},enabled:Boolean(l)&&Boolean(t)});return{data:p.data,isLoading:p.isLoading,isRefetching:p.isRefetching,isError:p.isError}},x=function(n){for(var t="";0!=n.length;){var e=n.pop();if(e&&e.operation){var r=u.mH[e.operation];t+="&".concat(null===e||void 0===e?void 0:e.type,"[").concat(null!==r&&void 0!==r?r:"","]=").concat(e.searchText.toString())}}return t},Z=function(){var n=(0,a.f)().onError,t=(0,o.useQueryClient)(),e=(0,i.bK)(),r=(0,c.a)().channel,u=r.id?r.id:"";return(0,o.useMutation)((function(n){var t=n.whichExport,r=n.type;return e.post("/channel/".concat(String(u),"/data-set/export?type=").concat(r),t,{responseType:"blob"})}),{onSuccess:function(){t.invalidateQueries("".concat(l,"-").concat(u))},onError:function(t){n(t)}})},b=function(){var n=(0,a.f)().onError,t=(0,i.bK)(),e=(0,c.a)().channel,r=e.id?e.id:"";return(0,o.useMutation)((function(n){var e=n.formFile,o=n.type;return t.post("/channel/".concat(String(r),"/data-set/upload?type=").concat(null!==o&&void 0!==o?o:""),e)}),{onError:function(t){n(t)}})},m=function(){var n=(0,a.f)().onError,t=(0,i.bK)(),e=(0,c.a)().channel,u=e.id?e.id:"";return(0,o.useMutation)((function(n){var e=n.dataSetUploadForm;return t.post("/channel/".concat(String(u),"/data-set/verify"),e.map((function(n){return(0,r.Z)((0,r.Z)({},n),{},{channel_id:u})})))}),{onError:function(t){n(t)}})},S=function(){var n=(0,o.useQueryClient)(),t=(0,a.f)().onError,e=(0,i.bK)(),u=(0,c.a)().channel,s=u.id?u.id:"";return(0,o.useMutation)((function(n){var t=n.dataSetUploadForm;return e.post("/channel/".concat(String(s),"/data-sets"),t.map((function(n){return(0,r.Z)((0,r.Z)({},n),{},{channel_id:s})})))}),{onSuccess:function(){n.invalidateQueries("".concat(l,"-").concat(s))},onError:function(n){t(n)}})}},4012:function(n,t,e){e.d(t,{Dm:function(){return f},Hl:function(){return v},Lc:function(){return l},Q8:function(){return d},WF:function(){return g},nr:function(){return h},rN:function(){return p},wj:function(){return s}});var r=e(1413),o=e(1933),i=e(5234),c=e(727),a=e(4936),u="getDefinition",l=function(n){var t=n.page,e=n.limit,r=n.searchText,a=n.sort,l=(0,i.bK)(),s=(0,c.a)().channel,d=s.id?s.id:"",f=(0,o.useQuery)(["".concat(u,"-").concat(d),t,e,r,a],(function(){return l.get("/channel/".concat(String(d),"/definition?page=").concat(String(t),"&limit=").concat(String(e)).concat(r?"&searchText=".concat(String(r)):"").concat(null!==a&&void 0!==a&&a.sortOrder?"?sort[".concat(String(a.sortKey),"]=").concat(String(a.sortOrder.slice(0,-3))):"")).then((function(n){return n.data}))}),{keepPreviousData:!0});return{data:f.data,isLoading:f.isLoading,refetch:f.refetch,isRefetching:f.isRefetching}},s=function(){var n=(0,a.f)().onError,t=(0,o.useQueryClient)(),e=(0,i.bK)(),l=(0,c.a)().channel,s=l.id?l.id:"";return(0,o.useMutation)((function(n){return e.post("/channel/".concat(String(s),"/definition"),(0,r.Z)((0,r.Z)({},n),{},{channel_id:s}))}),{onSuccess:function(){t.invalidateQueries("".concat(u,"-").concat(s))},onError:function(t){n(t)}})},d=function(){var n=(0,a.f)().onError,t=(0,o.useQueryClient)(),e=(0,i.bK)(),l=(0,c.a)().channel,s=l.id?l.id:"";return(0,o.useMutation)((function(n){var t=n.definitionForm,o=n.id;return e.put("/channel/".concat(String(s),"/definition/").concat(o),(0,r.Z)((0,r.Z)({},t),{},{channel_id:s}))}),{onSuccess:function(){t.invalidateQueries("".concat(u,"-").concat(s))},onError:function(t){n(t)}})},f=function(){var n=(0,a.f)().onError,t=(0,o.useQueryClient)(),e=(0,i.bK)(),r=(0,c.a)().channel,l=r.id?r.id:"";return(0,o.useMutation)((function(n){return e.delete("/channel/".concat(String(l),"/definition/").concat(n))}),{onSuccess:function(){t.invalidateQueries("".concat(u,"-").concat(l))},onError:function(t){n(t)}})},h=function(n){var t=n.type,e=n.page,r=n.limit,u=n.searchText,l=n.isExport,s=(0,i.bK)(),d=(0,c.a)().channel,f=d.id?d.id:"",h=(0,a.f)().onError,p=(0,o.useQuery)({queryKey:"exportDefinition",queryFn:function(){return s.get("/channel/".concat(String(f),"/definition/export?type=").concat(String(t),"&page=").concat(String(e),"&limit=").concat(String(r)).concat(u?"&searchText=".concat(u):""),{responseType:"blob"}).then((function(n){return n.data})).catch((function(n){return h(n)}))},enabled:Boolean(l)&&Boolean(t)});return{data:p.data,isLoading:p.isLoading,isRefetching:p.isRefetching,isError:p.isError}},p=function(){var n=(0,a.f)().onError,t=(0,i.bK)(),e=(0,c.a)().channel,r=e.id?e.id:"";return(0,o.useMutation)((function(n){var e=n.formFile,o=n.type;return t.post("/channel/".concat(String(r),"/definition/upload?type=").concat(null!==o&&void 0!==o?o:""),e)}),{onError:function(t){n(t)}})},g=function(){var n=(0,a.f)().onError,t=(0,i.bK)(),e=(0,c.a)().channel,u=e.id?e.id:"";return(0,o.useMutation)((function(n){var e=n.definitionUploadForm;return t.post("/channel/".concat(String(u),"/definition/verify"),e.map((function(n){return(0,r.Z)((0,r.Z)({},n),{},{channel_id:u})})))}),{onError:function(t){n(t)}})},v=function(){var n=(0,o.useQueryClient)(),t=(0,a.f)().onError,e=(0,i.bK)(),l=(0,c.a)().channel,s=l.id?l.id:"";return(0,o.useMutation)((function(n){var t=n.definitionUploadForm;return e.post("/channel/".concat(String(s),"/definitions"),t.map((function(n){return(0,r.Z)((0,r.Z)({},n),{},{channel_id:s})})))}),{onSuccess:function(){n.invalidateQueries("".concat(u,"-").concat(s))},onError:function(n){t(n)}})}},1454:function(n,t,e){e(2791);var r=e(6038),o=e(7309),i=e(184);t.Z=function(n){var t=n.haveEdit,e=n.disable,c=n.onCloseModal;return t?(0,i.jsx)(r.Z,{placement:"bottom",arrowPointAtCenter:!0,title:"All of unsaved data will be lose if you close this.",onConfirm:c,okText:"Leave",okButtonProps:{type:"default",danger:!0},cancelText:"Continue",children:(0,i.jsx)(o.Z,{disabled:e,children:"Cancel"})}):(0,i.jsx)(o.Z,{disabled:e,onClick:c,children:"Cancel"})}},1569:function(n,t,e){var r=e(7548),o=e(6106),i=e(914),c=(e(2791),e(184));t.Z=function(n){var t=n.title,e=n.description,a=n.icon,u=n.showModal,l=n.modalLoading,s=n.okText,d=void 0===s?"Confirm":s,f=n.okType,h=void 0===f?"primary":f,p=n.cancelText,g=void 0===p?"Cancel":p,v=n.onOk,x=n.onCancel;return(0,c.jsx)(r.Z,{title:(0,c.jsxs)(o.Z,{align:"middle",children:[a&&(0,c.jsx)(i.Z,{span:2,children:a}),(0,c.jsx)(i.Z,{span:a?22:24,children:t})]}),maskClosable:!1,closable:!1,okText:d,okType:h,cancelText:g,onOk:v,onCancel:x,visible:u,confirmLoading:l,getContainer:!1,children:e})}},8478:function(n,t,e){var r,o,i,c,a=e(168),u=(e(2791),e(6031)),l=e(7305),s=e(521),d=e(9228),f=e(7083),h=e(6106),p=e(914),g=e(3099),v=e(1046),x=e(3876),Z=e(3685),b=e(2864),m=e(3294),S=e(184),y=(0,u.ZP)(l.Z)(r||(r=(0,a.Z)(["\n  background: ",";\n  width: 100%;\n  height: 100%;\n  color: #ffffff;\n  text-align: center;\n"])),(function(n){return n.background})),E=(0,u.ZP)(s.Z.Title)(o||(o=(0,a.Z)(["\n  color: #ffffff !important;\n"]))),j=(0,u.ZP)(x.Z)(i||(i=(0,a.Z)(["\n  font-size: 30px;\n  color: #ffffff;\n"]))),C=(0,u.ZP)(Z.Z)(c||(c=(0,a.Z)(["\n  font-size: 30px;\n  color: #ffffff;\n"])));t.Z=function(n){var t=n.title,e=n.isLoading,r=n.onExport,o=function(n){r(!0,n)};return(0,S.jsx)(d.Z,{content:(0,S.jsx)(f.Z,{spinning:e,children:(0,S.jsxs)(h.Z,{gutter:[12,12],children:[(0,S.jsx)(p.Z,{span:12,children:(0,S.jsx)(y,{onClick:function(){o(m.Cx.JSON)},bordered:!1,hoverable:!0,background:"#2e72f8",children:(0,S.jsxs)(g.Z,{direction:"vertical",children:[(0,S.jsx)(j,{}),(0,S.jsx)(E,{level:5,children:"JSON"})]})})}),(0,S.jsx)(p.Z,{span:12,children:(0,S.jsx)(y,{onClick:function(){o(m.Cx.EXCEL)},bordered:!1,hoverable:!0,background:"#1d6f42",children:(0,S.jsxs)(g.Z,{direction:"vertical",children:[(0,S.jsx)(C,{}),(0,S.jsx)(E,{level:5,children:"Excel"})]})})})]})}),title:t,trigger:"click",children:(0,S.jsx)(v.Z,{type:"info",icon:(0,S.jsx)(b.Z,{}),children:"Export All"})})}},4384:function(n,t,e){var r,o,i,c,a=e(3433),u=e(9439),l=e(168),s=e(2791),d=e(6031),f=e(3099),h=e(785),p=e(7548),g=e(215),v=e(1046),x=e(3685),Z=e(3876),b=e(2444),m=e(4936),S=e(184),y=(0,d.ZP)(f.Z)(r||(r=(0,l.Z)(["\n  width: 100%;\n  align-items: center;\n  .ant-space-item {\n    text-align: center;\n    width: 100%;\n  }\n"]))),E=(0,d.ZP)(x.Z)(o||(o=(0,l.Z)(["\n  color: #1d6f42 !important;\n"]))),j=(0,d.ZP)(Z.Z)(i||(i=(0,l.Z)(["\n  font-size: 30px;\n  color: #2e72f8 !important;\n"]))),C=(0,d.ZP)(h.Z)(c||(c=(0,l.Z)(["\n  text-align: center;\n  margin-top: 20px;\n"])));t.Z=function(n){var t=n.title,e=n.showModal,r=n.isLoading,o=n.onShowModal,i=n.onImport,c=(0,m.f)(),l=c.errMsg,d=c.clearErrMsg,f=(0,s.useState)([]),h=(0,u.Z)(f,2),x=h[0],Z=h[1],k=(0,s.useState)(),M=(0,u.Z)(k,2),Q=M[0],T=M[1];return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(v.Z,{onClick:function(){return o(!0)},type:"warning",icon:(0,S.jsx)(b.Z,{}),children:"Import"}),(0,S.jsx)(p.Z,{title:t,visible:e,confirmLoading:r,onCancel:function(){return o(!1)},footer:null,width:"80%",children:(0,S.jsxs)(y,{direction:"vertical",children:[(0,S.jsxs)(g.Z.Dragger,{multiple:!1,listType:"picture",fileList:x,accept:".xlsx, .json",onChange:function(n){var t=(0,a.Z)(n.fileList);t=t.slice(-1),Z(t)},beforeUpload:function(n){return T(n),!1},disabled:r,children:[(0,S.jsxs)("p",{className:"ant-upload-drag-icon",children:[(0,S.jsx)(E,{}),(0,S.jsx)(j,{})]}),(0,S.jsx)("p",{className:"ant-upload-text",children:"Click or drag file (.xlsx, .json) to this area to upload"}),(0,S.jsx)("p",{className:"ant-upload-hint",children:"Support for a single upload."})]}),(0,S.jsx)(v.Z,{type:"primary",loading:r,onClick:function(){if(Q){var n=new FormData;n.append("file",Q,Q.name),i(n,Q.type)}},disabled:0===(null===x||void 0===x?void 0:x.length),children:"Upload"}),l&&(0,S.jsx)(C,{message:l,type:"error",showIcon:!0,closable:!0,onClose:d})]})})]})}},2970:function(n,t,e){var r,o=e(168),i=e(2791),c=e(6031),a=e(521),u=e(9220),l=e(184),s=(0,c.ZP)(a.Z.Text)(r||(r=(0,o.Z)(["\n  color: ",";\n"])),(function(n){return n.color})),d=i.forwardRef((function(n,t){var e=n.text,r=n.color,o=void 0===r?"black":r;return(0,l.jsx)(u.Z,{title:e,ref:t,children:(0,l.jsx)(s,{color:o,ellipsis:!0,ref:t,children:e})})}));d.displayName="TextWithToolTip",t.Z=d},4936:function(n,t,e){e.d(t,{f:function(){return a}});var r=e(9439),o=e(6910),i=e(3294),c=(0,o.cn)({key:"ErrorMessage",default:""}),a=function(){var n=(0,o.FV)(c),t=(0,r.Z)(n,2),e=t[0],a=t[1];return{errMsg:e,setErrMsgState:a,clearErrMsg:function(){a("")},onError:function(n){var t=JSON.parse(JSON.stringify(n)),e=n;try{var r,o=e.response.data,c=o.error_code,u=o.message,l=o.debug_message;if(c!==i.jK.UNAUTHORIZED)a("".concat(null===t||void 0===t?void 0:t.message,": ").concat(null!==(r=null!==l&&void 0!==l?l:c)&&void 0!==r?r:u))}catch(s){a("Error: ".concat(String(n)))}}}}},9593:function(n,t,e){e.d(t,{u:function(){return c}});var r=e(7892),o=e.n(r),i=e(3294),c=function(n,t,e){return function(n,t,e){var r=document.createElement("a");r.href=n,r.download="".concat(t,"-").concat(o()().format("YYYY-MM-DD"),".").concat(e),document.body.appendChild(r),r.click(),document.body.removeChild(r)}(e===i.Cx.EXCEL?window.URL.createObjectURL(new Blob([n],{type:"application/octet-stream"})):window.URL.createObjectURL(new Blob([n],{type:"application/json"})),t,e),!0}}}]);
//# sourceMappingURL=178.e99bda50.chunk.js.map