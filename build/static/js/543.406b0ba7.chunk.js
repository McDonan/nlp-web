"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[543],{6543:function(e,n,t){t.r(n),t.d(n,{default:function(){return Ke}});var i,o,r,l,a,d,s,c,u,f,x,h,Z,v,p,g,m,j,S,C,y,b=t(1413),w=t(9439),E=t(168),k=t(2791),L=t(6031),T=t(6106),M=t(914),I=t(3099),P=t(785),D=t(7083),F=t(1046),O=t(6871),A=t(5796),q=t(9286),_=t(1752),N=t(2622),z=t(6744),R=t(9593),V=t(3294),Q=t(8478),U=t(7305),$=t(521),K=t(9228),X=t(3876),B=t(3685),J=t(2864),G=t(184),W=(0,L.ZP)(F.Z)(i||(i=(0,E.Z)(["\n  background: #556ee6;\n  &:hover {\n    background: #778beb;\n  }\n"]))),H=(0,L.ZP)(U.Z)(o||(o=(0,E.Z)(["\n  background: ",";\n  width: 100%;\n  height: 100%;\n  color: #ffffff;\n  text-align: center;\n"])),(function(e){return e.background})),Y=(0,L.ZP)($.Z.Title)(r||(r=(0,E.Z)(["\n  color: #ffffff !important;\n"]))),ee=(0,L.ZP)(X.Z)(l||(l=(0,E.Z)(["\n  font-size: 30px;\n  color: #ffffff;\n"]))),ne=(0,L.ZP)(B.Z)(a||(a=(0,E.Z)(["\n  font-size: 30px;\n  color: #ffffff;\n"]))),te=function(e){var n=e.title,t=e.isLoading,i=e.isSelecting,o=e.onExport,r=function(e){o(!0,e)};return(0,G.jsx)(K.Z,{content:(0,G.jsx)(D.Z,{spinning:t,children:(0,G.jsxs)(T.Z,{gutter:[12,12],children:[(0,G.jsx)(M.Z,{span:12,children:(0,G.jsx)(H,{onClick:function(){r(V.Cx.JSON)},bordered:!1,hoverable:!0,background:"#2e72f8",children:(0,G.jsxs)(I.Z,{direction:"vertical",children:[(0,G.jsx)(ee,{}),(0,G.jsx)(Y,{level:5,children:"JSON"})]})})}),(0,G.jsx)(M.Z,{span:12,children:(0,G.jsx)(H,{onClick:function(){r(V.Cx.EXCEL)},bordered:!1,hoverable:!0,background:"#1d6f42",children:(0,G.jsxs)(I.Z,{direction:"vertical",children:[(0,G.jsx)(ne,{}),(0,G.jsx)(Y,{level:5,children:"Excel"})]})})})]})}),title:n,trigger:"click",children:(0,G.jsx)(W,{type:"info",icon:(0,G.jsx)(J.Z,{}),disabled:!i,children:"Export"})})},ie=t(4384),oe=t(7762),re=t(3433),le=t(4942),ae=t(3734),de=t(3272),se=t(881),ce=t(9389),ue=t(7528),fe=t(4012),xe=t(4936),he=ae.Z.Option,Ze=(0,L.ZP)(de.Z)(d||(d=(0,E.Z)(["\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: end;\n"]))),ve=(0,L.ZP)(T.Z)(s||(s=(0,E.Z)(["\n  width: 100%;\n"]))),pe=(0,L.ZP)(ve)(c||(c=(0,E.Z)(["\n  margin-bottom: 20px;\n"]))),ge=(0,L.ZP)(M.Z)(u||(u=(0,E.Z)(["\n  width: 33%;\n"]))),me=(0,L.ZP)(ge)(f||(f=(0,E.Z)(["\n  padding: 0 20px 0 0;\n"]))),je=(0,L.ZP)(ge)(x||(x=(0,E.Z)(["\n  padding: 0 20px 0 50px;\n"]))),Se=(0,L.ZP)(M.Z)(h||(h=(0,E.Z)(["\n  text-align: right;\n"]))),Ce=(0,L.ZP)(P.Z)(Z||(Z=(0,E.Z)(["\n  text-align: center;\n"]))),ye=function(e){var n=e.onSearch,t=e.defaultDefinitionId,i=(0,xe.f)(),o=i.errMsg,r=i.clearErrMsg,l=i.setErrMsgState,a=(0,k.useState)(t),d=(0,w.Z)(a,2),s=d[0],c=(d[1],(0,fe.Lc)({page:V.q5,limit:V.VZ,searchText:""})),u=c.data,f=c.isLoading,x=de.Z.useForm(),h=(0,w.Z)(x,1)[0],Z=(0,k.useState)(""),v=(0,w.Z)(Z,2),p=v[0],g=v[1],m=(0,k.useState)([]),j=(0,w.Z)(m,2),S=j[0],C=j[1],y=(0,k.useState)(""),E=(0,w.Z)(y,2),L=E[0],T=E[1],P=(0,k.useState)([]),D=(0,w.Z)(P,2),O=D[0],A=D[1],q=(null===u||void 0===u?void 0:u.items.reduce((function(e,n){return(0,b.Z)((0,b.Z)({},e),{},(0,le.Z)({},n.id,n.name))}),{}))||{},_=function(e){V.gI[e.type]===e.operation?l("Error: Field of type ".concat(e.type," cannot have operation of type ").concat(e.operation)):(C([].concat((0,re.Z)(S),[e])),h.resetFields(),g(""),p===V.$S.ACTION&&L!==V.L2.CONTAIN&&A([].concat((0,re.Z)(O),[e.searchText])))};return(0,k.useEffect)((function(){s&&_({type:V.$S.ACTION,operation:V.L2.EQUAL,searchText:null!==s&&void 0!==s?s:""})}),[]),(0,G.jsxs)(Ze,{form:h,onFinish:function(e){_(e)},children:[(0,G.jsxs)(ve,{children:[(0,G.jsx)(me,{span:8,children:(0,G.jsx)(de.Z.Item,{label:"Field",name:"type",rules:[{required:!0,message:"Field Type is required."}],children:(0,G.jsx)(ae.Z,{placeholder:"Select Field",onChange:function(e){g(e),h.setFieldsValue({operation:"",searchText:void 0})},value:p,children:V.Ki.map((function(e){return(0,G.jsx)(he,{value:e.value,children:e.name},e.name)}))})})}),(0,G.jsx)(je,{span:8,children:(0,G.jsx)(de.Z.Item,{label:"Operation",name:"operation",rules:[{required:!0,message:"Operation is required."}],children:(0,G.jsx)(se.ZP.Group,{disabled:!p,children:V.dZ.map((function(e){return(0,G.jsx)(se.ZP.Button,{value:e.value,disabled:V.gI[p]===e.value,onChange:function(e){var n=e.target.value;T(n)},children:e.name},e.name)}))})})}),(0,G.jsx)(ge,{children:p===V.$S.TEXT||L===V.L2.CONTAIN?(0,G.jsx)(de.Z.Item,{label:"Query Text",name:"searchText",rules:[{required:!0,message:"Query Text is required."}],children:(0,G.jsx)(ce.Z,{placeholder:"Query Text",allowClear:!0})}):(0,G.jsx)(de.Z.Item,{label:"Query",name:"searchText",rules:[{required:!0,message:"Query is required."}],children:(0,G.jsx)(ae.Z,{disabled:!p,showSearch:!0,loading:f,placeholder:"Search to Select Action",optionFilterProp:"children",filterOption:function(e,n){var t,i,o;return!(null===n||void 0===n||!n.children)&&(null===n||void 0===n||null===(t=n.children)||void 0===t||null===(i=t.toString())||void 0===i||null===(o=i.toLowerCase())||void 0===o?void 0:o.indexOf(e?null===e||void 0===e?void 0:e.toLowerCase():""))>=0},filterSort:function(e,n){var t,i,o,r,l;return e.children?null===e||void 0===e||null===(t=e.children)||void 0===t||null===(i=t.toString())||void 0===i||null===(o=i.toLowerCase())||void 0===o?void 0:o.localeCompare(null!==n&&void 0!==n&&n.children?null===n||void 0===n||null===(r=n.children)||void 0===r||null===(l=r.toString())||void 0===l?void 0:l.toLowerCase():""):0},children:null===u||void 0===u?void 0:u.items.filter((function(e){return O.indexOf(e.id)<0})).map((function(e){return(0,G.jsx)(he,{value:e.id,children:e.name},e.id)}))})})})]}),(0,G.jsxs)(pe,{children:[(0,G.jsxs)(M.Z,{span:19,children:[S&&S.map((function(e,n){return(0,G.jsxs)(ue.Z,{color:"blue",closable:!0,onClose:function(){!function(e,n,t){n===V.$S.ACTION&&O.splice(O.indexOf(t),1),S.splice(e,1)}(n,e.type,e.searchText)},children:[(null===e||void 0===e?void 0:e.type)===V.$S.ACTION?"definition":null===e||void 0===e?void 0:e.type,null===e||void 0===e?void 0:e.operation,(null===e||void 0===e?void 0:e.type)===V.$S.TEXT||(null===e||void 0===e?void 0:e.operation)===V.L2.CONTAIN?e.searchText:q[e.searchText]]},n)})),o&&(0,G.jsx)(Ce,{message:o,type:"error",showIcon:!0,closable:!0,onClose:r})]}),(0,G.jsx)(Se,{span:5,children:(0,G.jsxs)(I.Z,{children:[(0,G.jsx)(F.Z,{type:"danger",onClick:function(){C([])},children:"Clear"}),(0,G.jsx)(F.Z,{type:"lightdark",htmlType:"submit",children:"Add"}),(0,G.jsx)(F.Z,{type:"dark",onClick:function(){var e,t=new Map(S.map((function(e){var n=e.type,t=e.operation;return[n.concat(t),{type:n,operation:t,searchText:[]}]}))),i=(0,oe.Z)(S);try{for(i.s();!(e=i.n()).done;){var o,r,l=e.value,a=l.type,d=l.operation,s=l.searchText,c=a.concat(d);null===(o=t.get(c))||void 0===o||(r=o.searchText).push.apply(r,(0,re.Z)([s].flat()))}}catch(f){i.e(f)}finally{i.f()}var u=(0,re.Z)(t.values());n((0,z.Qf)(u))},children:"Search"})]})})]})]})},be=t(7548),we=t(4392),Ee=t(5323),ke=t(2970),Le=ae.Z.Option,Te=function(e){var n,t=e.value,i=e.onChange,o=e.isVerify,r=void 0!==o&&o,l=(0,fe.Lc)({page:V.q5,limit:V.VZ,searchText:""}),a=l.data,d=l.isLoading;return(0,G.jsx)(ae.Z,{value:t,onChange:i,showSearch:!0,loading:d,placeholder:"Search to Select Definition",optionFilterProp:"children",filterOption:function(e,n){var t,i,o;return!(null===n||void 0===n||!n.children)&&(null===n||void 0===n||null===(t=n.children)||void 0===t||null===(i=t.toString())||void 0===i||null===(o=i.toLowerCase())||void 0===o?void 0:o.indexOf(e?null===e||void 0===e?void 0:e.toLowerCase():""))>=0},filterSort:function(e,n){var t,i,o,r,l;return e.children?null===e||void 0===e||null===(t=e.children)||void 0===t||null===(i=t.toString())||void 0===i||null===(o=i.toLowerCase())||void 0===o?void 0:o.localeCompare(null!==n&&void 0!==n&&n.children?null===n||void 0===n||null===(r=n.children)||void 0===r||null===(l=r.toString())||void 0===l?void 0:l.toLowerCase():""):0},children:null===a||void 0===a||null===(n=a.items)||void 0===n?void 0:n.map((function(e){return(0,G.jsx)(Le,{value:r?e.name:e.id,children:e.name},e.id)}))})},Me=(0,L.ZP)(P.Z)(v||(v=(0,E.Z)(["\n  text-align: center;\n  margin-top: 20px;\n"]))),Ie=function(e){var n=e.data,t=e.isLoading,i=e.showModal,o=e.onShowModal,r=e.onVerify,l=e.onSubmit,a=e.onLoadingEdit,d=e.onSaveEdit,s=e.onSetRecord,c=e.onSetRecordIndex,u=e.onDelete,f=e.onAddRow,x=(0,k.useState)(""),h=(0,w.Z)(x,2)[1],Z=function(e){h(e)},v=(0,b.Z)({},n),p=(0,k.useState)(),g=(0,w.Z)(p,2),m=g[0],j=g[1],S=(0,k.useState)(!1),C=(0,w.Z)(S,2),y=C[0],E=C[1],L=(0,xe.f)(),T=L.errMsg,M=L.clearErrMsg,I=(null===n||void 0===n?void 0:n.every((function(e){return!0===e.accepted})))&&0!==n.length,P=Array.isArray(n)&&0!==n.length&&!y,O=de.Z.useForm(),A=(0,w.Z)(O,1)[0],q=[{title:"Text",key:"text",width:"10%",render:function(e){return m===e?(0,G.jsx)(de.Z.Item,{name:"text",rules:[{required:!0,message:"DataSet text is required.",whitespace:!0}],children:(0,G.jsx)(ce.Z,{value:m.text?m.text:"-"})}):(0,G.jsx)(ke.Z,{text:null===e||void 0===e?void 0:e.text,color:"black"})},sorter:function(e,n){return e.text.length-n.text.length}},{title:"Definition",dataIndex:"definition",key:"definition",render:function(e,n){return m===n?(0,G.jsx)(de.Z.Item,{name:"definition",rules:[{required:!0,message:"Definition is required.",whitespace:!0}],children:(0,G.jsx)(Te,{isVerify:!0,onChange:Z})}):(0,G.jsx)(ke.Z,{text:e||"-"})},width:"10%"},{title:"Status",dataIndex:"accepted",key:"status",render:function(e,n){return(0,G.jsx)(ue.Z,{color:void 0===e?"blue":e?"green":"red",children:void 0===e?"pending":e?"accepted":n.error_code})},width:"5%"},{title:"Edit",key:"edit",render:function(e){return m===e?(0,G.jsx)(F.Z,{type:"success",onClick:function(e){e.stopPropagation(),a(!0),j(void 0),A.validateFields().then((function(e){d(e),a(!1),E(!1)})).catch((function(){a(!1),E(!1)}))},icon:(0,G.jsx)(Ee.Z,{})}):(0,G.jsx)(F.Z,{type:"primary",onClick:function(t){t.stopPropagation(),j(e),c(null===n||void 0===n?void 0:n.indexOf(e)),E(!0),A.setFieldsValue({text:e.text,definition:e.definition})},icon:(0,G.jsx)(_.Z,{})})},width:"2.5%"},{title:"Delete",key:"delete",render:function(e){return(0,G.jsx)(F.Z,{type:"danger",onClick:function(t){t.stopPropagation(),c(null===n||void 0===n?void 0:n.indexOf(e)),s(e),u()},icon:(0,G.jsx)(N.Z,{})})},width:"2.5%"}];return(0,G.jsxs)(be.Z,{title:"Verify Imported DataSet",width:"80%",zIndex:999,visible:i,onCancel:function(){return o(!1)},footer:[(0,G.jsx)(F.Z,{type:"primary",onClick:r,disabled:!P,children:"Verify"},"verify"),(0,G.jsx)(F.Z,{type:"success",disabled:!I,onClick:l,children:"Submit"},"submit")],children:[(0,G.jsx)(F.Z,{type:"info",size:"small",onClick:f,children:"Add Row"},"verify"),(0,G.jsxs)(D.Z,{spinning:t,children:[(0,G.jsx)(de.Z,{form:A,initialValues:v,children:(0,G.jsx)(we.Z,{size:"small",dataSource:n?(0,re.Z)(n):[],columns:q,scroll:{y:"calc(75vh - 4rem)"}})}),T&&(0,G.jsx)(Me,{message:T,type:"error",showIcon:!0,closable:!0,onClose:M})]})]})},Pe=t(9421),De=function(e){var n=e.data,t=e.canEdit,i=e.onEdit,o=e.canDelete,r=e.onDelete,l=e.isSelectMultiple,a=e.setSelectedRecords,d=e.onChangePage,s=e.onChangePageSize,c=e.onChangeSort,u=(0,k.useState)([]),f=(0,w.Z)(u,2),x=f[0],h=f[1],Z=(0,k.useMemo)((function(){var e;return null===n||void 0===n||null===(e=n.items)||void 0===e?void 0:e.map((function(e){return(0,b.Z)({key:null===e||void 0===e?void 0:e.id},e)}))}),[n]),v={selectedRows:x,onChange:function(e,n){h((0,re.Z)(n)),a({ids:n.map((function(e){return e.id}))}),n.length<=1?l(!1):l(!0)}},p=[{title:"Text",key:"text",render:function(e){return(0,G.jsx)(ke.Z,{text:null===e||void 0===e?void 0:e.text})},sorter:function(e,n){return e.text.localeCompare(n.text)}},{title:"Definition",key:"definition",render:function(e){return(0,G.jsx)(ke.Z,{text:null===e||void 0===e?void 0:e.definition})},sorter:function(e,n){return e.definition.localeCompare(n.definition)}},{title:"Delete",key:"delete",hidden:!0,render:function(e){return(0,G.jsx)(F.Z,{type:"danger",onClick:function(n){n.stopPropagation(),r(e)},icon:(0,G.jsx)(N.Z,{}),disabled:!o})},width:"5%"}];return(0,G.jsx)(we.Z,{size:"small",locale:{emptyText:(0,G.jsx)(Pe.Z,{image:Pe.Z.PRESENTED_IMAGE_SIMPLE})},dataSource:null!==Z&&void 0!==Z?Z:[],columns:o?p:p.filter((function(e){return!e.hidden})),scroll:{y:"calc(75vh - 4rem)"},pagination:{showSizeChanger:!0,showTotal:function(e){return"Total ".concat(e," items")},defaultPageSize:V.L8,pageSizeOptions:V.TJ,total:null===n||void 0===n?void 0:n.meta_data.total,onChange:function(e,n){d(e-1),s(n)}},rowSelection:v,onRow:function(e){return{onClick:function(){t&&i(e)}}},onChange:function(e,n,t){var i,o=t;c({sortKey:String(o.columnKey),sortOrder:null!==(i=o.order)&&void 0!==i?i:void 0})}})},Fe=t(1454),Oe=(0,L.ZP)(M.Z)(p||(p=(0,E.Z)(["\n  text-align: center;\n"]))),Ae=(0,L.ZP)(P.Z)(g||(g=(0,E.Z)(["\n  text-align: center;\n  margin-top: 20px;\n"]))),qe=function(e){var n,t=e.data,i=e.showModal,o=e.modalLoading,r=e.onSubmit,l=e.onCloseModal,a=e.onLoadingModal,d=(0,xe.f)(),s=d.errMsg,c=d.clearErrMsg,u=Boolean(null!==(n=null===t||void 0===t?void 0:t.id)&&void 0!==n&&n),f=de.Z.useForm(),x=(0,w.Z)(f,1)[0],h=(0,k.useState)(""),Z=(0,w.Z)(h,2)[1],v=(0,k.useState)(!1),p=(0,w.Z)(v,2),g=p[0],m=p[1],j=u?(0,b.Z)({},t):{};return(0,k.useEffect)((function(){x.resetFields()}),[]),(0,G.jsxs)(be.Z,{title:"".concat(u?"Update":"Create"," Dataset"),width:"50%",maskClosable:!1,closable:!1,footer:null,visible:i,confirmLoading:o,getContainer:!1,children:[(0,G.jsx)(T.Z,{children:(0,G.jsx)(M.Z,{span:24,children:(0,G.jsxs)(de.Z,{form:x,onFinish:function(){a(!0),x.validateFields().then((function(e){r(e,null===t||void 0===t?void 0:t.id)})).catch((function(){a(!1)}))},onFieldsChange:function(){m(!0)},name:"dataset-form",labelCol:{span:6},wrapperCol:{span:18},initialValues:j,children:[(0,G.jsx)(de.Z.Item,{label:"Text",name:"text",rules:[{required:!0,message:"Text is required.",whitespace:!0}],children:(0,G.jsx)(ce.Z,{placeholder:"Dataset text"})}),(0,G.jsx)(de.Z.Item,{label:"Definition",name:"definition_id",rules:[{required:!0,message:"Definition is required.",whitespace:!0}],children:(0,G.jsx)(Te,{value:u?null===j||void 0===j?void 0:j.definition:"",onChange:function(e){Z(e)}})})]})})}),(0,G.jsx)(T.Z,{justify:"center",children:(0,G.jsx)(Oe,{children:(0,G.jsxs)(I.Z,{size:"middle",children:[(0,G.jsx)(F.Z,{type:u?"primary":"success",onClick:function(){return x.submit()},loading:o,children:u?"Update":"Create"}),(0,G.jsx)(Fe.Z,{onCloseModal:l,disable:o,haveEdit:g})]})})}),s&&(0,G.jsx)(Ae,{message:s,type:"error",showIcon:!0,closable:!0,onClose:c})]})},_e=(0,L.ZP)(M.Z)(m||(m=(0,E.Z)(["\n  text-align: center;\n"]))),Ne=(0,L.ZP)(P.Z)(j||(j=(0,E.Z)(["\n  text-align: center;\n  margin-top: 20px;\n"]))),ze=function(e){var n=e.showModal,t=e.modalLoading,i=e.onSubmit,o=e.onCloseModal,r=e.onLoadingModal,l=(0,xe.f)(),a=l.errMsg,d=l.clearErrMsg,s=de.Z.useForm(),c=(0,w.Z)(s,1)[0],u=(0,k.useState)(!1),f=(0,w.Z)(u,2),x=f[0],h=f[1],Z=(0,k.useState)(""),v=(0,w.Z)(Z,2),p=(v[0],v[1]);return(0,k.useEffect)((function(){c.resetFields()}),[]),(0,G.jsxs)(be.Z,{title:"Bulk Update DataSet",width:"50%",maskClosable:!1,closable:!1,footer:null,visible:n,confirmLoading:t,getContainer:!1,children:[(0,G.jsx)(T.Z,{children:(0,G.jsx)(M.Z,{span:24,children:(0,G.jsx)(de.Z,{form:c,onFinish:function(){r(!0),c.validateFields().then((function(e){i(e.definition_id)})).catch((function(){r(!1)}))},onFieldsChange:function(){h(!0)},name:"dataset-bulk-form",labelCol:{span:6},wrapperCol:{span:18},children:(0,G.jsx)(de.Z.Item,{label:"Definition",name:"definition_id",rules:[{required:!0,message:"Definition is required.",whitespace:!0}],children:(0,G.jsx)(Te,{onChange:function(e){p(e)}})})})})}),(0,G.jsx)(T.Z,{justify:"center",children:(0,G.jsx)(_e,{children:(0,G.jsxs)(I.Z,{size:"middle",children:[(0,G.jsx)(F.Z,{type:"primary",onClick:function(){return c.submit()},loading:t,children:"Bulk Update"}),(0,G.jsx)(Fe.Z,{onCloseModal:o,disable:t,haveEdit:x})]})})}),a&&(0,G.jsx)(Ne,{message:a,type:"error",showIcon:!0,closable:!0,onClose:d})]})},Re=t(1569),Ve=t(727),Qe=(0,L.ZP)(T.Z)(S||(S=(0,E.Z)(["\n  padding-bottom: 15px;\n"]))),Ue=(0,L.ZP)(M.Z)(C||(C=(0,E.Z)(["\n  display: flex;\n  align-items: end;\n"]))),$e=(0,L.ZP)(A.Z)(y||(y=(0,E.Z)(["\n  font-size: 22px;\n  color: #fbb437;\n"]))),Ke=function(){var e=(0,Ve.a)().accessPermission,n=(null===e||void 0===e?void 0:e.create_data_sets)||!1,t=(null===e||void 0===e?void 0:e.edit_data_sets)||!1,i=(null===e||void 0===e?void 0:e.delete_data_sets)||!1,o=(null===e||void 0===e?void 0:e.import_data_sets)||!1,r=(null===e||void 0===e?void 0:e.export_data_sets)||!1,l=(null===e||void 0===e?void 0:e.search_data_sets)||!1,a=(0,O.TH)().state,d=(0,k.useState)(null===a||void 0===a?void 0:a.definitionID),s=(0,w.Z)(d,1)[0],c=(0,k.useState)(null!==s&&void 0!==s?s:""),u=(0,w.Z)(c,2),f=u[0],x=u[1],h=(0,k.useState)(),Z=(0,w.Z)(h,2),v=Z[0],p=Z[1],g=(0,k.useState)(!1),m=(0,w.Z)(g,2),j=m[0],S=m[1],C=(0,k.useState)(),y=(0,w.Z)(C,2),E=y[0],L=y[1],T=(0,k.useState)(),A=(0,w.Z)(T,2),U=A[0],$=A[1],K=(0,k.useState)(!1),X=(0,w.Z)(K,2),B=X[0],J=X[1],W=(0,k.useState)(!1),H=(0,w.Z)(W,2),Y=H[0],ee=H[1],ne=(0,k.useState)(!1),oe=(0,w.Z)(ne,2),re=oe[0],le=oe[1],ae=(0,k.useState)(!1),de=(0,w.Z)(ae,2),se=de[0],ce=de[1],ue=(0,k.useState)(!1),fe=(0,w.Z)(ue,2),he=fe[0],Ze=fe[1],ve=(0,k.useState)(!1),pe=(0,w.Z)(ve,2),ge=pe[0],me=pe[1],je=(0,k.useState)(),Se=(0,w.Z)(je,2),Ce=Se[0],be=Se[1],we=(0,k.useState)(!1),Ee=(0,w.Z)(we,2),ke=Ee[0],Le=Ee[1],Te=(0,xe.f)(),Me=Te.errMsg,Pe=Te.clearErrMsg,Fe=(0,k.useState)(0),Oe=(0,w.Z)(Fe,2),Ae=Oe[0],_e=Oe[1],Ne=(0,k.useState)(V.L8),Ke=(0,w.Z)(Ne,2),Xe=Ke[0],Be=Ke[1],Je=(0,k.useState)(),Ge=(0,w.Z)(Je,2),We=Ge[0],He=Ge[1],Ye=(0,k.useState)(!1),en=(0,w.Z)(Ye,2),nn=en[0],tn=en[1],on=(0,z.MC)({page:Ae,limit:Xe,searchText:f===s?void 0:f,definitionID:f!==s?void 0:f,sort:v}),rn=on.data,ln=on.isLoading,an=on.isRefetching,dn=(0,z.wE)({type:U,page:V.q5,limit:V.VZ,searchText:f,isExport:B}),sn=dn.data,cn=dn.isLoading,un=dn.isRefetching,fn=dn.isError,xn=(0,z.tx)(),hn=(0,z.Cq)(),Zn=(0,z.Yb)(),vn=(0,z.pd)(),pn=(0,z.Xb)(),gn=(0,z.iA)(),mn=(0,z.l)(),jn=(0,z.TK)(),Sn=(0,k.useState)(),Cn=(0,w.Z)(Sn,2),yn=Cn[0],bn=Cn[1],wn=(0,k.useState)([]),En=(0,w.Z)(wn,2),kn=En[0],Ln=En[1],Tn=(0,k.useState)(),Mn=(0,w.Z)(Tn,2),In=Mn[0],Pn=Mn[1],Dn=(0,z.b$)(),Fn=(0,k.useState)(!1),On=(0,w.Z)(Fn,2),An=On[0],qn=On[1],_n=(0,k.useState)(!1),Nn=(0,w.Z)(_n,2),zn=Nn[0],Rn=Nn[1],Vn=(0,k.useState)(!1),Qn=(0,w.Z)(Vn,2),Un=Qn[0],$n=Qn[1],Kn=(0,k.useState)(!1),Xn=(0,w.Z)(Kn,2),Bn=Xn[0],Jn=Xn[1],Gn=(0,k.useState)(!1),Wn=(0,w.Z)(Gn,2),Hn=Wn[0],Yn=Wn[1],et=function(e){ee(e),Pe()},nt=function(e){le(e),Pe()},tt=function(e){Ze(e)},it=function(e){Yn(e)},ot=function(e){qn(e)},rt=function(e){$n(e)},lt=function(e){Rn(e)},at=function(e){Jn(e)},dt=function(e){Pe(),me(e)},st=function(e){ce(e)},ct=function(e){J(e)},ut=function(e,n){Pe(),ct(e),function(e){$(e)}(n)};return(0,k.useEffect)((function(){!function(){var e=!1,n=!1;B&&U&&sn&&!cn&&!un&&!fn&&(n=!0,e=(0,R.u)(sn,"dataset",U)),e?ct(!1):n&&(He(V.jK.DOWNLOADFAIL),ct(!1))}()}),[B,U,sn]),(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)(M.Z,{children:[l&&(0,G.jsx)(ye,{onSearch:function(e){x(e)},defaultDefinitionId:s}),(0,G.jsx)(Qe,{justify:"start",children:(0,G.jsx)(Ue,{span:12,children:(0,G.jsxs)(I.Z,{children:[n&&(0,G.jsx)(F.Z,{onClick:function(){be(void 0),et(!0)},type:"success",icon:(0,G.jsx)(q.Z,{}),children:"Create"}),t&&(0,G.jsx)(F.Z,{onClick:function(){nt(!0)},type:"primary",icon:(0,G.jsx)(_.Z,{}),disabled:!j,children:"Edit"}),i&&(0,G.jsx)(F.Z,{onClick:function(){rt(!0)},type:"danger",icon:(0,G.jsx)(N.Z,{}),disabled:!j,children:"Delete"}),o&&(0,G.jsx)(ie.Z,{title:"Import Dataset",showModal:ge,onShowModal:function(e){return dt(e)},isLoading:gn.isLoading,onImport:function(e,n){return function(e,n){var t;t="application/json"===n?V.Cx.JSON:V.Cx.EXCEL,gn.mutate({formFile:e,type:t},{onSuccess:function(e){dt(!1),st(!0),Ln(null===e||void 0===e?void 0:e.data)},onError:function(){tt(!1)}})}(e,n)}}),r&&(0,G.jsx)(te,{title:"Export Selected Dataset",isLoading:ke,isSelecting:(E?E.ids.length:0)>=1,onExport:function(e,n){!function(e,n){Le(e),Pe(),Dn.mutate({type:n,whichExport:null!==E&&void 0!==E?E:{ids:[]}},{onSuccess:function(e){var t=!1;n&&(t=(0,R.u)(e.data,"selected-dataset",n)),t||He(V.jK.DOWNLOADFAIL),Le(!1)},onError:function(){tn(!0),Le(!1)}})}(e,n)}}),r&&(0,G.jsx)(Q.Z,{title:"Export Dataset",isLoading:cn||un,onExport:function(e,n){return ut(e,n)}}),se&&(0,G.jsx)(Ie,{onVerify:function(){it(!0),kn&&mn.mutate({dataSetUploadForm:kn},{onSuccess:function(e){var n;it(!1),Ln(null===(n=mn.data)||void 0===n?void 0:n.data),Ln(e.data)},onError:function(){it(!1)}})},data:kn,isLoading:Hn,showModal:se,onShowModal:function(e){return st(e)},onSubmit:function(){kn&&jn.mutate({dataSetUploadForm:kn},{onSuccess:function(){it(!1),st(!1)}})},onDelete:function(){ot(!0)},onSaveEdit:function(e){e&&function(e){var n=(0,b.Z)((0,b.Z)((0,b.Z)({},yn),e),{},{accepted:void 0});bn(n),kn&&void 0!==In&&(kn[In]=n)}(e)},onLoadingEdit:function(e){return it(e)},onSetRecordIndex:Pn,onSetRecord:bn,onAddRow:function(){var e={text:"",definition:""};bn(e),kn&&kn.push(e)}}),Y&&(0,G.jsx)(qe,{data:Ce,showModal:Y,modalLoading:he,onSubmit:function(e,n){n?function(e,n){e&&hn.mutate({dataSetForm:e,id:null!==n&&void 0!==n?n:""},{onSuccess:function(){et(!1),tt(!1)},onError:function(){tt(!1)}})}(e,n):function(e){e&&xn.mutate(e,{onSuccess:function(){et(!1),tt(!1)},onError:function(){tt(!1)}})}(e)},onCloseModal:function(){return et(!1)},onLoadingModal:function(e){return tt(e)}}),re&&(0,G.jsx)(ze,{showModal:re,modalLoading:he,onSubmit:function(e){!function(e,n){e&&n&&vn.mutate({ids:e.ids,definition_id:n},{onSuccess:function(){nt(!1),tt(!1)},onError:function(){tt(!1)}})}(E,e)},onCloseModal:function(){return nt(!1)},onLoadingModal:function(e){return tt(e)}}),An&&(0,G.jsx)(Re.Z,{title:'Are you sure you would like to delete the "'.concat(se?null!==yn&&void 0!==yn&&yn.text?null===yn||void 0===yn?void 0:yn.text:"":null!==Ce&&void 0!==Ce&&Ce.text?null===Ce||void 0===Ce?void 0:Ce.text:"",'" dataset ?'),description:"All of reference dataset of this dataset will be deleted too.",icon:(0,G.jsx)($e,{}),okText:"Delete",cancelText:"Cancel",showModal:An,modalLoading:zn,okType:"danger",onOk:function(){var e;se?(lt(!0),void 0!==In&&kn&&kn.splice(In,1),ot(!1),lt(!1)):null!==Ce&&void 0!==Ce&&Ce.id&&(lt(!0),e=null===Ce||void 0===Ce?void 0:Ce.id,Zn.mutate(e,{onSuccess:function(){ot(!1),lt(!1)},onError:function(){lt(!1)}}))},onCancel:function(){ot(!1)}}),Un&&(0,G.jsx)(Re.Z,{title:'Are you sure you would like to delete the "'.concat(null!==Ce&&void 0!==Ce&&Ce.text?null===Ce||void 0===Ce?void 0:Ce.text:"",'" definition ?'),description:"All of reference dataset of this definition will be deleted too.",icon:(0,G.jsx)($e,{}),okText:"Delete",cancelText:"Cancel",showModal:Un,modalLoading:Bn,okType:"danger",onOk:function(){j&&E&&pn.mutate(E,{onSuccess:function(){rt(!1),at(!1)},onError:function(){at(!1)}})},onCancel:function(){rt(!1)}})]})})})]}),nn&&Me&&(0,G.jsx)(P.Z,{type:"error",message:Me,closable:!0,banner:!0,onClose:function(){Pe(),tn(!1)}}),B&&U&&Me&&(0,G.jsx)(P.Z,{type:"error",message:Me,closable:!0,banner:!0,onClose:function(){Pe(),J(!1)}}),We&&(0,G.jsx)(P.Z,{type:"error",message:We,closable:!0,banner:!0,onClose:function(){He(void 0)}}),(0,G.jsx)(D.Z,{spinning:ln||an,children:(0,G.jsx)(De,{data:rn,canEdit:t,onEdit:function(e){be(e),et(!0)},canDelete:i,onDelete:function(e){be(e),ot(!0)},isSelectMultiple:S,setSelectedRecords:L,onChangePage:_e,onChangePageSize:Be,onChangeSort:p})})]})}}}]);
//# sourceMappingURL=543.406b0ba7.chunk.js.map