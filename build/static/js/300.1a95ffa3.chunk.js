"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[300],{6810:function(e,n,t){t.d(n,{Bw:function(){return l},hk:function(){return s},jx:function(){return c},qk:function(){return u}});var o=t(1933),r=t(5234),a=t(4936),i="getChannel",l=function(e){var n=e.page,t=e.limit,a=e.searchText,l=e.sort,c=(0,r.bK)(),s=(0,o.useQuery)({queryKey:[i,"".concat(i,"-").concat(a||""),l],queryFn:function(){return c.get("/channels?page=".concat(n,"&limit=").concat(t).concat(a?"&searchText=".concat(a):"").concat(null!==l&&void 0!==l&&l.sortOrder?"?sort[".concat(String(l.sortKey),"]=").concat(String(l.sortOrder.slice(0,-3))):"")).then((function(e){return e.data}))}});return{data:s.data,isLoading:s.isLoading,refetch:s.refetch,isRefetching:s.isRefetching}},c=function(){var e=(0,a.f)().onError,n=(0,o.useQueryClient)(),t=(0,r.bK)();return(0,o.useMutation)((function(e){return t.post("/channels",e)}),{onSuccess:function(){n.invalidateQueries(i)},onError:function(n){e(n)}})},s=function(){var e=(0,a.f)().onError,n=(0,o.useQueryClient)(),t=(0,r.bK)();return(0,o.useMutation)((function(e){var n=e.channelForm,o=e.id;return t.put("/channels/".concat(o),n)}),{onSuccess:function(){n.invalidateQueries(i)},onError:function(n){e(n)}})},u=function(){var e=(0,a.f)().onError,n=(0,o.useQueryClient)(),t=(0,r.bK)();return(0,o.useMutation)((function(e){var n=e.id,o=e.active;return t.put("/channels/".concat(n,"?active=").concat(String(o)))}),{onSuccess:function(){n.invalidateQueries(i)},onError:function(n){e(n)}})}},1454:function(e,n,t){t(2791);var o=t(6038),r=t(7309),a=t(184);n.Z=function(e){var n=e.haveEdit,t=e.disable,i=e.onCloseModal;return n?(0,a.jsx)(o.Z,{placement:"bottom",arrowPointAtCenter:!0,title:"All of unsaved data will be lose if you close this.",onConfirm:i,okText:"Leave",okButtonProps:{type:"default",danger:!0},cancelText:"Continue",children:(0,a.jsx)(r.Z,{disabled:t,children:"Cancel"})}):(0,a.jsx)(r.Z,{disabled:t,onClick:i,children:"Cancel"})}},8478:function(e,n,t){var o,r,a,i,l=t(168),c=(t(2791),t(6031)),s=t(7305),u=t(521),d=t(9228),f=t(7083),h=t(6106),v=t(914),m=t(3099),g=t(1046),p=t(3876),x=t(3685),Z=t(2864),y=t(3294),C=t(184),b=(0,c.ZP)(s.Z)(o||(o=(0,l.Z)(["\n  background: ",";\n  width: 100%;\n  height: 100%;\n  color: #ffffff;\n  text-align: center;\n"])),(function(e){return e.background})),j=(0,c.ZP)(u.Z.Title)(r||(r=(0,l.Z)(["\n  color: #ffffff !important;\n"]))),k=(0,c.ZP)(p.Z)(a||(a=(0,l.Z)(["\n  font-size: 30px;\n  color: #ffffff;\n"]))),S=(0,c.ZP)(x.Z)(i||(i=(0,l.Z)(["\n  font-size: 30px;\n  color: #ffffff;\n"])));n.Z=function(e){var n=e.title,t=e.isLoading,o=e.onExport,r=function(e){o(!0,e)};return(0,C.jsx)(d.Z,{content:(0,C.jsx)(f.Z,{spinning:t,children:(0,C.jsxs)(h.Z,{gutter:[12,12],children:[(0,C.jsx)(v.Z,{span:12,children:(0,C.jsx)(b,{onClick:function(){r(y.Cx.JSON)},bordered:!1,hoverable:!0,background:"#2e72f8",children:(0,C.jsxs)(m.Z,{direction:"vertical",children:[(0,C.jsx)(k,{}),(0,C.jsx)(j,{level:5,children:"JSON"})]})})}),(0,C.jsx)(v.Z,{span:12,children:(0,C.jsx)(b,{onClick:function(){r(y.Cx.EXCEL)},bordered:!1,hoverable:!0,background:"#1d6f42",children:(0,C.jsxs)(m.Z,{direction:"vertical",children:[(0,C.jsx)(S,{}),(0,C.jsx)(j,{level:5,children:"Excel"})]})})})]})}),title:n,trigger:"click",children:(0,C.jsx)(g.Z,{type:"info",icon:(0,C.jsx)(Z.Z,{}),children:"Export All"})})}},4936:function(e,n,t){t.d(n,{f:function(){return l}});var o=t(9439),r=t(6910),a=t(3294),i=(0,r.cn)({key:"ErrorMessage",default:""}),l=function(){var e=(0,r.FV)(i),n=(0,o.Z)(e,2),t=n[0],l=n[1];return{errMsg:t,setErrMsgState:l,clearErrMsg:function(){l("")},onError:function(e){var n=JSON.parse(JSON.stringify(e)),t=e;try{var o,r=t.response.data,i=r.error_code,c=r.message,s=r.debug_message;if(i!==a.jK.UNAUTHORIZED)l("".concat(null===n||void 0===n?void 0:n.message,": ").concat(null!==(o=null!==s&&void 0!==s?s:i)&&void 0!==o?o:c))}catch(u){l("Error: ".concat(String(e)))}}}}},4300:function(e,n,t){t.r(n),t.d(n,{default:function(){return X}});var o,r,a,i=t(9439),l=t(168),c=t(2791),s=t(9389),u=t(6106),d=t(914),f=t(3099),h=t(785),v=t(7083),m=t(1046),g=t(5796),p=t(9286),x=t(7762),Z=t(4942),y=t(1413),C=t(3734),b=t(3272),j=t(7528),k=t(7548),S=t(4936),E=t(1454),w=t(6031),_=t(6810),R=t(3294),M=t(3323),T=t(184),L=C.Z.Option,P=(0,w.ZP)(h.Z)(o||(o=(0,l.Z)(["\n  text-align: center;\n  margin-top: 20px;\n"]))),O=function(e){var n,t,o,r,a,l,d=e.data,h=e.showModal,g=e.userRolesData,p=e.isModalLoading,w=e.onCreateUser,O=e.onUpdateUser,I=e.onCloseModal,N=e.onLoadingModal,D=b.Z.useForm(),K=(0,i.Z)(D,1)[0],U=(0,S.f)(),q=U.errMsg,z=U.clearErrMsg,F=Boolean(null!==(n=null===d||void 0===d?void 0:d.id)&&void 0!==n&&n),Q=null!==d&&void 0!==d&&d.email?d.email.split("@",2):["","kbtg.tech"],A=F?{employee_id:null===d||void 0===d?void 0:d.employee_id,email:null!==(t=Q[0])&&void 0!==t?t:"",email_host:"@".concat(null!==(o=Q[1])&&void 0!==o?o:"kbtg.tech"),name:null===d||void 0===d?void 0:d.name,role:null===d||void 0===d?void 0:d.role,channel_ids:null===d||void 0===d?void 0:d.channels.map((function(e){return e.id}))}:{email_host:"@kbtg.tech"},Y=(0,_.Bw)({page:R.q5,limit:R.VZ,searchText:""}),B=Y.data,V=Y.isLoading,H=Y.isRefetching,J=[],$=(0,c.useState)(null!==(r=A.channel_ids)&&void 0!==r?r:[]),G=(0,i.Z)($,2),X=G[0],W=G[1];null===B||void 0===B||B.items.map((function(e){var n;e.active?J.push((0,T.jsx)(L,{value:e.id,children:e.name},e.id)):null!==(n=A.channel_ids)&&void 0!==n&&n.includes(e.id)&&J.push((0,T.jsx)(T.Fragment,{children:X.includes(e.id)&&(0,T.jsx)(L,{value:e.id,disabled:!0,children:e.name},e.id)}))}));var ee,ne=(null===g||void 0===g?void 0:g.reduce((function(e,n){return(0,y.Z)((0,y.Z)({},e),{},(0,Z.Z)({},n.role,!n.permissions.bind_channels))}),{}))||{},te=(0,c.useState)(!!F&&(null!==(a=!ne[null!==(l=null===d||void 0===d?void 0:d.role)&&void 0!==l?l:""])&&void 0!==a&&a)),oe=(0,i.Z)(te,2),re=oe[0],ae=oe[1],ie=(0,c.useState)(!1),le=(0,i.Z)(ie,2),ce=le[0],se=le[1],ue=[],de=(0,x.Z)(null!==g&&void 0!==g?g:[]);try{for(de.s();!(ee=de.n()).done;){var fe=ee.value;ue.push((0,T.jsx)(L,{value:fe.role,children:fe.name},fe.name))}}catch(ve){de.e(ve)}finally{de.f()}var he=(0,T.jsxs)(C.Z,{className:"select-after-email",style:{width:200,textAlign:"left"},children:[(0,T.jsx)(L,{value:"@kbtg.tech",children:"@kbtg.tech"},"kbtg.tech"),(0,T.jsx)(L,{value:"@kasikornbank.com",children:"@kasikornbank.com"},"kasikornbank.com"),"prod"!==M.Z.REACT_APP_ENV&&(0,T.jsx)(L,{value:"@kasikornthaibank.in.th",children:"@kasikornthaibank.in.th"},"kasikornthaibank.in.th")]});return(0,T.jsxs)(k.Z,{title:"".concat(F?"Update":"Create"," User"),visible:h,closable:!1,footer:null,width:"50%",children:[(0,T.jsx)(v.Z,{spinning:p,children:(0,T.jsxs)(b.Z,{labelCol:{span:6},wrapperCol:{span:18},form:K,name:"user-manage-form",onFinish:function(e){if(e.email&&e.email_host&&e.employee_id){var n,t;N(!0);var o,r={email:"".concat(e.email).concat(e.email_host),role:null!==(n=e.role)&&void 0!==n?n:"",employee_id:e.employee_id,name:e.name,channel_ids:null!==(t=e.channel_ids)&&void 0!==t?t:[]};if(F)O(r,null!==(o=null===d||void 0===d?void 0:d.id)&&void 0!==o?o:"");else w(r)}},onFieldsChange:function(){se(!0)},initialValues:A,children:[(0,T.jsx)(b.Z.Item,{name:"employee_id",label:"Employee ID",rules:[{required:!0,message:"Employee ID is required!"},{pattern:new RegExp(/^[a-zA-Z]+[0-9]+$/),message:"Must begin with a letter followed by a number, example K012345."}],children:(0,T.jsx)(s.Z,{placeholder:"Employee ID",disabled:F})}),(0,T.jsx)(b.Z.Item,{name:"email",label:"Email",rules:[{required:!0,message:"Email is required"},{pattern:new RegExp(/^[a-z0-9_.+-]+$/),message:"Please enter a valid email"}],children:(0,T.jsx)(s.Z,{addonAfter:(0,T.jsx)(b.Z.Item,{name:"email_host",noStyle:!0,children:he}),placeholder:"Username"})}),(0,T.jsx)(b.Z.Item,{name:"name",label:"Name",rules:[{required:!0,message:"Name is required!"},{pattern:new RegExp(/^[a-zA-Z\u0e01-\u0e4f0-9 ]*$/),message:"Please enter a valid name"}],children:(0,T.jsx)(s.Z,{placeholder:"Firstname-Surname"})}),(0,T.jsx)(b.Z.Item,{name:"role",label:"Role",rules:[{required:!0,message:"Role is required!"}],children:(0,T.jsx)(C.Z,{placeholder:"Select user role",onChange:function(e){var n;ae(null!==(n=!ne[e])&&void 0!==n&&n)},children:ue})}),re&&(0,T.jsx)(b.Z.Item,{name:"channel_ids",label:"Channel",children:(0,T.jsx)(C.Z,{mode:"multiple",allowClear:!0,tagRender:function(e){var n=e.label,t=e.onClose,o=e.disabled;return(0,T.jsx)(j.Z,{color:o?"grey":"green",onMouseDown:function(e){e.preventDefault(),e.stopPropagation()},closable:!0,onClose:t,style:{marginRight:3},children:n})},style:{width:"100%"},placeholder:"Select user Channel",loading:V||H,filterOption:function(e,n){var t,o,r;return!(null===n||void 0===n||!n.children)&&(null===n||void 0===n||null===(t=n.children)||void 0===t||null===(o=t.toString())||void 0===o||null===(r=o.toLowerCase())||void 0===r?void 0:r.indexOf(e?null===e||void 0===e?void 0:e.toLowerCase():""))>=0},optionFilterProp:"children",onChange:function(e){W(e)},children:J})}),(0,T.jsx)(u.Z,{justify:"center",children:(0,T.jsxs)(f.Z,{size:"middle",children:[(0,T.jsx)(m.Z,{type:F?"primary":"success",htmlType:"submit",children:F?"Edit":"Create"}),(0,T.jsx)(E.Z,{onCloseModal:I,disable:p,haveEdit:ce})]})})]})}),q&&(0,T.jsx)(P,{message:q,type:"error",showIcon:!0,closable:!0,onClose:z})]})},I=t(8478),N=t(5581),D=t(4392),K=t(9421),U=t(7892),q=t.n(U),z=t(5527),F=t(727),Q=function(e){var n=e.data,t=e.userRole,o=e.canEdit,r=e.onEdit,a=e.canSetStatus,i=e.onSetStatus,l=e.onChangePage,s=e.onChangePageSize,u=e.onChangeSort,d=(0,F.a)().userData,f=(null===t||void 0===t?void 0:t.reduce((function(e,n){return(0,y.Z)((0,y.Z)({},e),{},(0,Z.Z)({},n.role,n.name))}),{}))||{},h=(0,c.useMemo)((function(){var e;return null===n||void 0===n||null===(e=n.items)||void 0===e?void 0:e.map((function(e){return(0,y.Z)({key:null===e||void 0===e?void 0:e.id},e)}))}),[n]),v=[{title:"Username",dataIndex:"email",key:"email",sorter:function(e,n){return e.email.localeCompare(n.email)}},{title:"Employee ID",dataIndex:"employee_id",key:"employee_id",width:"7.5%",sorter:function(e,n){return e.employee_id.localeCompare(n.employee_id)}},{title:"Fullname",dataIndex:"name",key:"name",sorter:function(e,n){return e.name.localeCompare(n.name)}},{title:"Role",dataIndex:"role",key:"role",render:function(e){var n;return e&&null!==(n=f[e])&&void 0!==n?n:"unknown role"},width:"10%",sorter:function(e,n){return e.role.localeCompare(n.role)}},{title:"Channel",key:"channels",render:function(e){var n;if(null!==(n=e.permissions)&&void 0!==n&&n.bind_all_channels)return(0,T.jsx)(j.Z,{className:"allChannel",children:"All Channel"});var t=[];return e.channels.map((function(e){e.active&&t.push((0,T.jsx)(j.Z,{className:e.name,children:e.name}))})),0!==t.length?t:"-"}},{title:"User Status",key:"active",width:"5%",render:function(e){return a&&(null===d||void 0===d?void 0:d.id)!==e.id?(0,T.jsx)(N.Z,{defaultChecked:e.active,checked:e.active,onChange:function(n,t){t.stopPropagation(),i(e,n)}}):(0,T.jsx)(z.Z,{twoToneColor:e.active?"#52c41a":"#dddddd"})}},{title:"Reason",key:"reason",dataIndex:"reason",render:function(e){return void 0===e?"-":e}},{title:"Last Log on",dataIndex:"last_log_on",key:"last_log_on",render:function(e){return null===e?"-":q()(e).format("DD/MM/YYYY")},width:"8%",sorter:function(e,n){return e.last_log_on.localeCompare(n.last_log_on)}},{title:"Created Date",dataIndex:"created_at",key:"created_at",render:function(e){return null===e?"-":q()(e).format("DD/MM/YYYY")},width:"8%",sorter:function(e,n){return e.created_at.localeCompare(n.created_at)}}];return(0,T.jsx)(D.Z,{size:"small",locale:{emptyText:(0,T.jsx)(K.Z,{image:K.Z.PRESENTED_IMAGE_SIMPLE})},dataSource:null!==h&&void 0!==h?h:[],columns:v,scroll:{y:"calc(65vh - 4rem)"},pagination:{showSizeChanger:!0,showTotal:function(e){return"Total ".concat(e," items")},defaultPageSize:R.L8,pageSizeOptions:R.TJ,total:null===n||void 0===n?void 0:n.meta_data.total,onChange:function(e,n){l(e-1),s(n)}},onRow:function(e){return{onClick:function(){o&&e.id!==(null===d||void 0===d?void 0:d.id)&&r(e)}}},onChange:function(e,n,t){var o,r=t;u({sortKey:String(r.columnKey),sortOrder:null!==(o=r.order)&&void 0!==o?o:void 0})}})},A=t(9593),Y=function(e){var n=e.title,t=e.description,o=e.icon,r=e.showModal,a=e.modalLoading,l=e.requireReason,f=e.okText,h=void 0===f?"Confirm":f,v=e.okType,m=void 0===v?"primary":v,g=e.cancelText,p=void 0===g?"Cancel":g,x=e.setReasonText,Z=e.onOk,y=e.onCancel,C=s.Z.TextArea,b=(0,c.useState)(!l),j=(0,i.Z)(b,2),S=j[0],E=j[1];return(0,c.useEffect)((function(){x("")}),[]),(0,T.jsxs)(k.Z,{title:(0,T.jsxs)(u.Z,{align:"middle",children:[o&&(0,T.jsx)(d.Z,{span:2,children:o}),(0,T.jsx)(d.Z,{span:o?22:24,children:n})]}),maskClosable:!1,closable:!1,okText:h,okType:m,okButtonProps:{disabled:!S},cancelText:p,onOk:Z,onCancel:y,visible:r,confirmLoading:a,getContainer:!1,children:[t,l&&(0,T.jsx)(C,{onChange:function(e){var n;x(e.target.value),E(!(null===(n=e.target.value)||void 0===n||null!==n.match(/^ *$/)))},placeholder:"Reason",autoSize:{minRows:2,maxRows:5}})]})},B=t(1933),V=t(5234),H="getUser",J=s.Z.Search,$=(0,w.ZP)(u.Z)(r||(r=(0,l.Z)(["\n  padding-bottom: 15px;\n"]))),G=(0,w.ZP)(g.Z)(a||(a=(0,l.Z)(["\n  font-size: 22px;\n  color: #fbb437;\n"]))),X=function(){var e=(0,S.f)(),n=e.errMsg,t=e.clearErrMsg,o=(0,F.a)().accessPermission,r=(null===o||void 0===o?void 0:o.create_users)||!1,a=(null===o||void 0===o?void 0:o.edit_users)||!1,l=(null===o||void 0===o?void 0:o.set_users_status)||!1,s=(null===o||void 0===o?void 0:o.export_users)||!1,u=(null===o||void 0===o?void 0:o.search_users)||!1,g=(0,c.useState)(!1),x=(0,i.Z)(g,2),Z=x[0],y=x[1],C=(0,c.useState)(!1),b=(0,i.Z)(C,2),j=b[0],k=b[1],E=(0,c.useState)(),w=(0,i.Z)(E,2),_=w[0],M=w[1],L=(0,c.useState)(),P=(0,i.Z)(L,2),N=P[0],D=P[1],K=(0,c.useState)(0),U=(0,i.Z)(K,2),q=U[0],z=U[1],X=(0,c.useState)(R.L8),W=(0,i.Z)(X,2),ee=W[0],ne=W[1],te=(0,c.useState)(),oe=(0,i.Z)(te,2),re=oe[0],ae=oe[1],ie=(0,c.useState)(!1),le=(0,i.Z)(ie,2),ce=le[0],se=le[1],ue=(0,c.useState)(!1),de=(0,i.Z)(ue,2),fe=de[0],he=de[1],ve=(0,c.useState)(!1),me=(0,i.Z)(ve,2),ge=me[0],pe=me[1],xe=(0,c.useState)(),Ze=(0,i.Z)(xe,2),ye=Ze[0],Ce=Ze[1],be=(0,c.useState)(!1),je=(0,i.Z)(be,2),ke=je[0],Se=je[1],Ee=(0,c.useState)(!1),we=(0,i.Z)(Ee,2),_e=we[0],Re=we[1],Me=(0,c.useState)(),Te=(0,i.Z)(Me,2),Le=Te[0],Pe=Te[1],Oe=(0,c.useState)(),Ie=(0,i.Z)(Oe,2),Ne=Ie[0],De=Ie[1],Ke=function(e){var n=e.page,t=e.limit,o=e.searchText,r=e.sort,a=(0,V.bK)(),i=(0,B.useQuery)({queryKey:[H,n,o,r],queryFn:function(){return a.get("/users?page=".concat(String(n),"&limit=").concat(String(t)).concat(o?"&searchText=".concat(String(o)):"").concat(null!==r&&void 0!==r&&r.sortOrder?"?sort[".concat(String(r.sortKey),"]=").concat(String(r.sortOrder.slice(0,-3))):"")).then((function(e){return e.data}))},keepPreviousData:!0});return{data:i.data,isLoading:i.isLoading,refetch:i.refetch,isRefetching:i.isRefetching}}({page:q,limit:ee,searchText:_,sort:N}),Ue=Ke.data,qe=Ke.isLoading,ze=Ke.isRefetching,Fe=function(){var e=(0,S.f)().onError,n=(0,V.bK)(),t=(0,B.useQuery)({queryKey:"getUserRole",queryFn:function(){return n.get("/users/roles").then((function(e){return e.data})).catch((function(n){return e(n)}))}});return{data:t.data,isLoading:t.isLoading,isRefetching:t.isRefetching,isError:t.isError}}(),Qe=Fe.data,Ae=Fe.isLoading,Ye=Fe.isRefetching,Be=function(e){var n=e.type,t=e.page,o=e.limit,r=e.searchText,a=e.isExport,i=(0,S.f)().onError,l=(0,V.bK)(),c=(0,B.useQuery)({queryKey:"exportDataSet",queryFn:function(){return l.get("/users/export?type=".concat(String(n),"&page=").concat(String(t),"&limit=").concat(String(o)).concat(r?"&searchText=".concat(r):""),{responseType:"blob"}).then((function(e){return e.data})).catch((function(e){return i(e)}))},enabled:Boolean(a)&&Boolean(n)});return{data:c.data,isLoading:c.isLoading,isRefetching:c.isRefetching,isError:c.isError}}({type:re,page:R.q5,limit:R.VZ,searchText:_,isExport:ce}),Ve=Be.data,He=Be.isLoading,Je=Be.isRefetching,$e=Be.isError,Ge=function(){var e=(0,S.f)().onError,n=(0,B.useQueryClient)(),t=(0,V.bK)();return(0,B.useMutation)((function(e){return t.post("/users",e)}),{onSuccess:function(){n.invalidateQueries(H)},onError:function(n){e(n)}})}(),Xe=function(){var e=(0,S.f)().onError,n=(0,B.useQueryClient)(),t=(0,V.bK)();return(0,B.useMutation)((function(e){var n=e.userForm,o=e.id;return t.put("/users/".concat(o),n)}),{onSuccess:function(){n.invalidateQueries(H)},onError:function(n){e(n)}})}(),We=function(){var e=(0,S.f)().onError,n=(0,B.useQueryClient)(),t=(0,V.bK)();return(0,B.useMutation)((function(e){var n=e.body,o=e.id,r=e.active;return t.put("/users/".concat(o,"?active=").concat(r.toString()),n)}),{onSuccess:function(){n.invalidateQueries(H)},onError:function(t){e(t),n.invalidateQueries(H)}})}(),en=function(e){t(),y(e)},nn=function(e){k(e)};return(0,c.useEffect)((function(){!function(){var e=!1,n=!1;ce&&re&&Ve&&!He&&!Je&&!$e&&(n=!0,e=(0,A.u)(Ve,"users",re)),e?se(!1):n&&(Pe("Frontend Error: Cannot downloadfile to your computer"),se(!1))}()}),[ce,re,Ve]),(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)($,{children:[(0,T.jsx)(d.Z,{span:18,children:(0,T.jsxs)(f.Z,{children:[r&&(0,T.jsxs)(m.Z,{type:"success",onClick:function(){Ce(void 0),en(!0)},children:[(0,T.jsx)(p.Z,{}),"Create User"]}),s&&(0,T.jsx)(I.Z,{title:"Export User",isLoading:He||Je,onExport:function(e,n){!function(e,n){t(),se(e),ae(n)}(e,n)}})]})}),(0,T.jsx)(d.Z,{span:6,children:u&&(0,T.jsx)(J,{placeholder:"Search",allowClear:!0,onSearch:function(e){M(e)}})})]}),Z&&(0,T.jsx)(O,{data:ye,userRolesData:null!==Qe&&void 0!==Qe?Qe:void 0,isModalLoading:Ae||Ye||j,showModal:Z,onCreateUser:function(e){e&&Ge.mutate(e,{onSuccess:function(){en(!1),nn(!1)},onError:function(){nn(!1)}})},onUpdateUser:function(e,n){e&&n&&Xe.mutate({userForm:e,id:n},{onSuccess:function(){en(!1),nn(!1)},onError:function(){nn(!1)}})},onCloseModal:function(){return en(!1)},onLoadingModal:k}),fe&&(0,T.jsx)(Y,{title:'Are you sure you would like to change status user "'.concat(null!==ye&&void 0!==ye&&ye.name?null===ye||void 0===ye?void 0:ye.name:"",'" ?'),description:"".concat(null!==ye&&void 0!==ye&&ye.name?null===ye||void 0===ye?void 0:ye.name:"User","'s status will change to ").concat(ke?"active":"inactive",". ").concat(ke?"":"Please specify the reason for disabling User ".concat(null!==ye&&void 0!==ye&&ye.name?null===ye||void 0===ye?void 0:ye.name:"name not found"," (").concat(null!==ye&&void 0!==ye&&ye.employee_id?null===ye||void 0===ye?void 0:ye.employee_id:"",").")),icon:(0,T.jsx)(G,{}),okText:"Change",cancelText:"Cancel",showModal:fe,modalLoading:ge,requireReason:!ke,okType:"primary",setReasonText:De,onOk:function(){!function(e,n,t){var o={reason:null!==t&&void 0!==t?t:""};e?(pe(!0),We.mutate({body:o,id:e,active:n},{onSuccess:function(){Ce(void 0),pe(!1),he(!1)},onError:function(){Re(!0),pe(!1),Ce(void 0),he(!1)}})):he(!1)}(null===ye||void 0===ye?void 0:ye.id,ke,Ne)},onCancel:function(){he(!1)}}),_e&&(0,T.jsx)(h.Z,{type:"error",message:n,closable:!0,banner:!0,onClose:function(){t(),Re(!1)}}),ce&&re&&n&&(0,T.jsx)(h.Z,{type:"error",message:n,closable:!0,banner:!0,onClose:function(){t(),se(!1)}}),Le&&(0,T.jsx)(h.Z,{type:"error",message:Le,closable:!0,banner:!0,onClose:function(){Pe(void 0)}}),(0,T.jsx)(v.Z,{spinning:qe||ze||Ae||Ye,children:(0,T.jsx)(Q,{data:Ue,userRole:null!==Qe&&void 0!==Qe?Qe:void 0,canEdit:a,canSetStatus:l,onEdit:function(e){Ce(e),en(!0)},onSetStatus:function(e,n){he(!0),Ce(e),Se(n)},onChangePage:z,onChangePageSize:ne,onChangeSort:D})})]})}},9593:function(e,n,t){t.d(n,{u:function(){return i}});var o=t(7892),r=t.n(o),a=t(3294),i=function(e,n,t){return function(e,n,t){var o=document.createElement("a");o.href=e,o.download="".concat(n,"-").concat(r()().format("YYYY-MM-DD"),".").concat(t),document.body.appendChild(o),o.click(),document.body.removeChild(o)}(t===a.Cx.EXCEL?window.URL.createObjectURL(new Blob([e],{type:"application/octet-stream"})):window.URL.createObjectURL(new Blob([e],{type:"application/json"})),n,t),!0}},5527:function(e,n,t){t.d(n,{Z:function(){return c}});var o=t(1413),r=t(2791),a={icon:function(e,n){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:e}},{tag:"path",attrs:{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm193.4 225.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.3 0 19.9 5 25.9 13.3l71.2 98.8 157.2-218c6-8.4 15.7-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.4 12.7z",fill:n}},{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z",fill:e}}]}},name:"check-circle",theme:"twotone"},i=t(4291),l=function(e,n){return r.createElement(i.Z,(0,o.Z)((0,o.Z)({},e),{},{ref:n,icon:a}))};l.displayName="CheckCircleTwoTone";var c=r.forwardRef(l)},5581:function(e,n,t){t.d(n,{Z:function(){return C}});var o=t(7462),r=t(4942),a=t(2791),i=t(9439),l=t(4925),c=t(1694),s=t.n(c),u=t(5179),d=t(1354),f=a.forwardRef((function(e,n){var t,o=e.prefixCls,c=void 0===o?"rc-switch":o,f=e.className,h=e.checked,v=e.defaultChecked,m=e.disabled,g=e.loadingIcon,p=e.checkedChildren,x=e.unCheckedChildren,Z=e.onClick,y=e.onChange,C=e.onKeyDown,b=(0,l.Z)(e,["prefixCls","className","checked","defaultChecked","disabled","loadingIcon","checkedChildren","unCheckedChildren","onClick","onChange","onKeyDown"]),j=(0,u.Z)(!1,{value:h,defaultValue:v}),k=(0,i.Z)(j,2),S=k[0],E=k[1];function w(e,n){var t=S;return m||(E(t=e),null===y||void 0===y||y(t,n)),t}var _=s()(c,f,(t={},(0,r.Z)(t,"".concat(c,"-checked"),S),(0,r.Z)(t,"".concat(c,"-disabled"),m),t));return a.createElement("button",Object.assign({},b,{type:"button",role:"switch","aria-checked":S,disabled:m,className:_,ref:n,onKeyDown:function(e){e.which===d.Z.LEFT?w(!1,e):e.which===d.Z.RIGHT&&w(!0,e),null===C||void 0===C||C(e)},onClick:function(e){var n=w(!S,e);null===Z||void 0===Z||Z(n,e)}}),g,a.createElement("span",{className:"".concat(c,"-inner")},S?p:x))}));f.displayName="Switch";var h=f,v=t(7106),m=t(2833),g=t(1929),p=t(1815),x=t(9125),Z=function(e,n){var t={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(t[o]=e[o]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)n.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(t[o[r]]=e[o[r]])}return t},y=a.forwardRef((function(e,n){var t,i=e.prefixCls,l=e.size,c=e.disabled,u=e.loading,d=e.className,f=void 0===d?"":d,y=Z(e,["prefixCls","size","disabled","loading","className"]),C=a.useContext(g.E_),b=C.getPrefixCls,j=C.direction,k=a.useContext(p.Z),S=a.useContext(x.Z),E=c||S||u,w=b("switch",i),_=a.createElement("div",{className:"".concat(w,"-handle")},u&&a.createElement(v.Z,{className:"".concat(w,"-loading-icon")})),R=s()((t={},(0,r.Z)(t,"".concat(w,"-small"),"small"===(l||k)),(0,r.Z)(t,"".concat(w,"-loading"),u),(0,r.Z)(t,"".concat(w,"-rtl"),"rtl"===j),t),f);return a.createElement(m.Z,{insertExtraNode:!0},a.createElement(h,(0,o.Z)({},y,{prefixCls:w,className:R,disabled:E,ref:n,loadingIcon:_})))}));y.__ANT_SWITCH=!0,y.displayName="Switch";var C=y}}]);
//# sourceMappingURL=300.1a95ffa3.chunk.js.map